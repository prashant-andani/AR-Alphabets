<html>

<meta aframe-injected="" name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui">
<meta aframe-injected="" name="mobile-web-app-capable" content="yes">
<meta description="The letters and pictures of the alphabet are learned through Augmented Reality.">

<head>
	<title>
		EduAR
	</title>
	<link rel="manifest" href="manifest.json">
	
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
</head>
<body>
	<!-- <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.5.0/aframe/build/aframe-ar.js" crossorigin="anonymous"></script> -->
	<script src="https://prashant-andani.github.io/AR.js/aframe/build/aframe-ar.js">


	</script>

	<div class="AR-tip">
		<p>This is an AR Education app for children
			<a style="white-space: nowrap" class="links" target="_blank" href="https://www.google.ru/search?q=hiro+marker&newwindow=1&source=lnms&tbm=isch&sa=X&ved=0ahUKEwiV97CF6LnXAhUHpqQKHSfEBSAQ_AUICigB&biw=1676&bih=855&dpr=2">Hiro-marker</a>
		</p>
		<a class="gotit" href="#">Got it!</a>
	</div>

	<div class="btns-wrap">
		<div class="btn rotate"></div>
		<div class="btn scale"></div>
		<div class="btn prev custom-button">Prev</div>
		<div class="btn next custom-button">Next</div>
	</div>

	<a-scene  embedded arjs='trackingMethod: best; sourceType: webcam; debugUIEnabled: false;'>

		<a-assets>
			<a-asset-item id="deer_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/deer/scene.gltf"></a-asset-item>

			<a-asset-item id="xmas_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/christmas_tree/scene.gltf"></a-asset-item>
			<a-asset-item id="flower_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/flower/scene.gltf"></a-asset-item>
			<a-asset-item id="car_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/oldcar/scene.gltf"></a-asset-item>
			<a-asset-item id="tree_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/tree/scene.gltf"></a-asset-item>
			<a-asset-item id="gun_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/gun/scene.gltf"></a-asset-item>
			<a-asset-item id="hen_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/hen/scene.gltf"></a-asset-item>
			<a-asset-item id="dog_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/dog/scene.gltf"></a-asset-item>
			<a-asset-item id="van_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/van/scene.gltf"></a-asset-item>
			<a-asset-item id="lion_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/lion/scene.gltf"></a-asset-item>
			<a-asset-item id="whale_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/whale/scene.gltf"></a-asset-item>
			<a-asset-item id="iphone_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/iphone/scene.gltf"></a-asset-item>
			<a-asset-item id="pencil_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/pencil/scene.gltf"></a-asset-item>
			<a-asset-item id="axe_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/axe/scene.gltf"></a-asset-item>
			<a-asset-item id="cow_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/cow/scene.gltf"></a-asset-item>
			<a-asset-item id="knife_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/knife/scene.gltf"></a-asset-item>
			<a-asset-item id="owl_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/owl/scene.gltf"></a-asset-item>
			<a-asset-item id="boat_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/boat/scene.gltf"></a-asset-item>
			<a-asset-item id="rat_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/rat/scene.gltf"></a-asset-item>
			<a-asset-item id="earth_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/earth/scene.gltf"></a-asset-item>
			<a-asset-item id="scissor_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/scissor/scene.gltf"></a-asset-item>
			<a-asset-item id="jaguar_asset" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/jaguar/scene.gltf"></a-asset-item>
			<!-- Object -->
			<a-asset-item id="zebra_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/zebra_obj/Zebra.obj"></a-asset-item>
			<a-asset-item id="zebra_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/zebra_obj/Zebra.mtl"></a-asset-item>
			<a-asset-item id="monkey_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/monkey/Monkey.obj"></a-asset-item>
			<a-asset-item id="monkey_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/monkey/Monkey.mtl"></a-asset-item>
			<a-asset-item id="umbrella_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/umbrella/NOVELO_OPENUMBRELLA.obj"></a-asset-item>
			<a-asset-item id="umbrella_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/umbrella/NOVELO_OPENUMBRELLA.mtl"></a-asset-item>
			<a-asset-item id="yolk_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/yolk/UncrackedEgg_239.obj"></a-asset-item>
			<a-asset-item id="yolk_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/yolk/UncrackedEgg_239.mtl"></a-asset-item>
			<a-asset-item id="qtip_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/qtip/CHAHIN_QTIP.obj"></a-asset-item>
			<a-asset-item id="qtip_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/qtip/CHAHIN_QTIP.mtl"></a-asset-item>
			<a-asset-item id="nest_asset_obj" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/nest/PUSHILIN_birds_nest.obj"></a-asset-item>
			<a-asset-item id="nest_asset_mtl" src="https://raw.githubusercontent.com/prashant-andani/3d-models/master/nest/PUSHILIN_birds_nest.mtl"></a-asset-item>

		</a-assets>

		<a-marker preset="custom" patterUrl="pattern-letterG.patt" url="pattern-letterG.patt" id="aframe-scene">
			<a-entity light="type: hemisphere; color: #fefddd; groundColor: #fefddd; intensity: 1.2"></a-entity>
		</a-marker>

		<!-- <a-entity camera></a-entity> -->

	</a-scene>
	<script>
		$(document).ready(init());

		function init() {
			var scaleFlag = 0,
				kyivFlag = false;
			var data = [{
					id: 1,
					title: 'A',
					assetId: 'axe_asset',
					scale: '0.1 0.1 0.1',
					isObj: false
				},
				{
					id: 2,
					title: 'B',
					assetId: 'boat_asset',
					scale: '4 4 4',
					isObj: false
				},
				{
					id: 3,
					title: 'C',
					assetId: 'cow_asset',
					scale: '0.1 0.1 0.1',
					isObj: false
				},
				{
					id: 4,
					title: 'D',
					assetId: 'deer_asset',
					scale: '0.7 0.7 0.7',
					isObj: false
				},
				{
					id: 5,
					title: 'E',
					assetId: 'earth_asset',
					scale: '0.2 0.2 0.2',
					isObj: false
				},
				{
					id: 6,
					title: 'F',
					assetId: 'flower_asset',
					scale: '0.09 0.09 0.09',
					isObj: false
				},
				{
					id: 7,
					title: 'G',
					assetId: 'gun_asset',
					scale: '0.4 0.4 0.4',
					isObj: false
				},
				{
					id: 8,
					title: 'H',
					assetId: 'hen_asset',
					scale: '0.02 0.02 0.02',
					isObj: false
				},
				{
					id: 9,
					title: 'I',
					assetId: 'iphone_asset',
					scale: '0.6 0.6 0.6',
					isObj: false
				},
				{
					id: 10,
					title: 'J',
					assetId: 'jaguar_asset',
					scale: '0.02 0.02 0.02',
					isObj: false
				},
				{
					id: 11,
					title: 'K',
					assetId: 'knife_asset',
					scale: '0.09 0.09 0.09',
					isObj: false
				},
				{
					id: 12,
					title: 'L',
					assetId: 'lion_asset',
					scale: '0.01 0.01 0.01',
					isObj: false
				},
				{
					id: 13,
					title: 'M',
					objAsset: 'monkey_asset_obj',
					mtlAsset: 'monkey_asset_mtl',
					scale: '0.1 0.1 0.1',
					isObj: true
				},
				{
					id: 14,
					title: 'N',
					objAsset: 'nest_asset_obj',
					mtlAsset: 'nest_asset_mtl',
					scale: '0.5 0.5 0.5',
					isObj: true
				},
				{
					id: 15,
					title: 'O',
					assetId: 'owl_asset',
					scale: '6 6 6',
					isObj: false

				},
				{
					id: 16,
					title: 'P',
					assetId: 'pencil_asset',
					scale: '0.1 0.1 0.1',
					isObj: false

				},
				{
					id: 17,
					title: 'Q',
					objAsset: 'qtip_asset_obj',
					mtlAsset: 'qtip_asset_mtl',
					scale: '1.2 1.2 1.2',
					isObj: true
				},
				{
					id: 18,
					title: 'R',
					assetId: 'rat_asset',
					scale: '0.5 0.5 0.5',
					isObj: false

				},

				{
					id: 19,
					title: 'S',
					assetId: 'scissor_asset',
					scale: '0.2 0.2 0.2',
					isObj: false

				},
				{
					id: 20,
					title: 'T',
					assetId: 'tree_asset',
					scale: '0.006 0.006 0.006',
					isObj: false
				},
				{
					id: 21,
					title: 'U',
					objAsset: 'umbrella_asset_obj',
					mtlAsset: 'umbrella_asset_mtl',
					scale: '0.01 0.01 0.01 ',
					isObj: true

				},
				{
					id: 22,
					title: 'V',
					assetId: 'van_asset',
					scale: '8 8 8',
					isObj: false

				},
				{
					id: 23,
					title: 'W',
					assetId: 'whale_asset',
					scale: '0.5 0.5 0.5',
					isObj: false

				},

				{
					id: 24,
					title: 'X',
					assetId: 'xmas_asset',
					scale: '0.005 0.005 0.005',
					isObj: false
				},
				{
					id: 25,
					title: 'Y',
					objAsset: 'yolk_asset_obj',
					mtlAsset: 'yolk_asset_mtl',
					scale: '0.03 0.03 0.03',
					isObj: true

				},
				{
					id: 26,
					title: 'Z',
					objAsset: 'zebra_asset_obj',
					mtlAsset: 'zebra_asset_mtl',
					scale: '0.1 0.1 0.1 ',
					isObj: true

				}
			];
			var
				rotateBtn = $(".rotate"),
				scaleBtn = $(".scale"),
				switchBtn = $(".switch"),
				gotitBtn = $(".gotit");
			prevBtn = $(".prev");
			nextBtn = $(".next");

			var currentObject = '';
			var currentId = 0;
			var prev = 0;

			addObject(data, currentId, 1);

			gotitBtn.click(function () {
				gotitBtn.parent().css({
					display: "none"
				});
			});


			rotateBtn.click(function () {
				if (rotateBtn.hasClass("rotate_fade")) {
					currentObject.emit('endRotate');
					rotateBtn.removeClass("rotate_fade");
				} else {
					currentObject.emit('rotate');
					rotateBtn.addClass("rotate_fade");
				}
			});



			scaleBtn.click(function () {
				if (scaleFlag == 0) {
					scaleFlag = 1;
					carModel.setAttribute("scale", scale = "0.09 0.09 0.09");
					//henModel.setAttribute("scale", scale = "0.09 0.09 0.09");
					scaleBtn.addClass("scale_one");
				} else if (scaleFlag == 1) {
					scaleFlag = 2;
					carModel.setAttribute("scale", scale = "0.1 0.1 0.1");
					//			henModel.setAttribute("scale", scale = "0.1 0.1 0.1");
					scaleBtn.addClass("scale_two");
					scaleBtn.removeClass("scale_one");
				} else if (scaleFlag == 2) {
					scaleFlag = 0;
					carModel.setAttribute("scale", scale = "0.05 0.05 0.05");
					//henModel.setAttribute("scale", scale = "0.05 0.05 0.05");
					scaleBtn.removeClass("scale_two");
				}
			});

			prevBtn.click(function () {
				if (currentId !== 0) {
					currentId -= 1;
				} else {
					currentId = data.length - 1;
				}

				addObject(data, currentId, currentId + 1);
				hideObjects(data, currentId, currentId + 1);
			});

			nextBtn.click(function () {
				if (currentId !== data.length - 1) {
					currentId += 1;
				} else {
					currentId = 0;
				}
				addObject(data, currentId, currentId - 1);
				hideObjects(data, currentId, currentId - 1);
			});

			function addObject(data, currentId, toRemoveId) {
				var currentData = data[currentId];
				if (document.querySelector('#obj_' + currentData.id)) {
					document.querySelector('#obj_' + currentData.id).setAttribute('visible', 'true');
					return;
				}

				var entity = document.createElement('a-entity');
				entity.setAttribute('id', 'obj_' + currentData.id);
				entity.setAttribute('rotation', '0 -90 0');
				entity.setAttribute('side', 'double');
				entity.setAttribute('position', '0.0 0.2 0');
				entity.setAttribute('scale', currentData.scale);
				if (currentData.isObj === true) {
					entity.setAttribute('obj-model', 'obj: #' + currentData.objAsset + '; mtl: #' + currentData.mtlAsset);
				} else {
					entity.setAttribute('gltf-model', '#' + currentData.assetId);
				}


				//Add animation
				var animation = document.createElement('a-animation');
				animation.setAttribute('attribute', 'rotation');
				animation.setAttribute('being', 'rotate');
				animation.setAttribute('end', 'endRotate');
				animation.setAttribute('dur', '26000');
				animation.setAttribute('fill', 'forwards');
				animation.setAttribute('to', '0 270 0');
				animation.setAttribute('repeat', 'indefinite');
				animation.setAttribute('easing', 'linear');

				var marker = document.querySelector('#aframe-scene');
				entity.appendChild(animation);
				marker.appendChild(entity);

			}

			function hideObjects(data, currentId, toRemoveId) {
				if (document.querySelector('#obj_' + data.id)) {
					document.querySelector('#obj_' + data.id).setAttribute('visible', 'true');
					return;
				}
				data.forEach(element => {
					if (document.querySelector('#obj_' + element.id) !== null) {
						if (element.id === toRemoveId) {
							document.querySelector('#obj_' + element.id).setAttribute('visible', true);
						} else {

							document.querySelector('#obj_' + element.id).setAttribute('visible', false);
						}
					}
				});
			}
		}
		
	</script>
</body>

</html>
